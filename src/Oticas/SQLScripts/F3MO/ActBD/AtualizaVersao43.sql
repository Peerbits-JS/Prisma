/* ACT BD EMPRESA VERSAO 43*/
--atualizar acessos de vistas
EXEC('update [F3MOGeral].dbo.tbMenus set btnContextoImprimir = 0 where Descricao not in (''DocumentosCompras'', ''DocumentosPagamentosCompras'', ''DocumentosStock'', ''DocumentosStockContagem'',''DocumentosVendas'', ''DocumentosVendasServicos'', ''Exames'')')
EXEC('update PA set PA.Imprimir=0 from [F3MOGeral].dbo.tbPerfisAcessos AS PA inner join [F3MOGeral].dbo.tbMenus AS M on M.ID = PA.IDMenus where M.btnContextoImprimir = 0')
EXEC('update [F3MOGeral].dbo.tbMenus set btnContextoConsultar=1, btnContextoAdicionar=0, btnContextoAlterar=0, btnContextoRemover=0, btnContextoExportar=0, btnContextoImprimir=0 where Descricao = ''Etiquetas''')
EXEC('update PA set PA.Adicionar = 0, PA.Alterar = 0, PA.Remover = 0, PA.Exportar= 0, PA.Imprimir=0 from [F3MOGeral].dbo.tbPerfisAcessos AS PA inner join [F3MOGeral].dbo.tbMenus AS M on M.ID = PA.IDMenus where M.Descricao = ''Etiquetas''')
EXEC('update [F3MOGeral].dbo.tbMenus set btnContextoConsultar=1, btnContextoAdicionar=0, btnContextoAlterar=0, btnContextoRemover=0, btnContextoExportar=1, btnContextoImprimir=1, btnContextoDuplicar=0 where Descricao = ''Consultas''')
EXEC('update PA set PA.Consultar= 1, PA.Adicionar = 0, PA.Alterar = 0, PA.Remover = 0, PA.Exportar= 1, PA.Imprimir=1, PA.Duplicar= 0 from [F3MOGeral].dbo.tbPerfisAcessos AS PA inner join [F3MOGeral].dbo.tbMenus AS M on M.ID = PA.IDMenus where M.Descricao = ''Consultas''')
EXEC('update tbMapasVistas SET Descricao = ''MapaMargemVendas'' WHERE Entidade = ''MapaMargemVendas''')
EXEC('update tbMapasVistas set Ativo = 0 where NomeMapa = ''rptReportDinamico''')
EXEC('update tbSistemaTiposEstados set cor =''est-anulado'' where codigo=''ANL''')

--atualizar vista dos documentos de venda
EXEC('update [F3MOGeral].dbo.tbListasPersonalizadas set query=''
select d.IDLoja as IDLoja, d.ID as ID, l.Descricao as DescricaoLoja, (case when NumeroDocumento=0 then cast(TD.Codigo as nvarchar(20))+ '''' '''' + TDS.CodigoSerie + ''''/'''' else TD.Codigo + '''' '''' + TDS.CodigoSerie + ''''/'''' + cast(D.NumeroDocumento as nvarchar(20)) end) as Documento, DataDocumento, c.Codigo as CodigoCliente, NomeFiscal, TotalMoedaDocumento, TotalEntidade1, TotalClienteMoedaDocumento, d.IDEntidade, d.Assinatura, c.nome as DescricaoEntidade, (case when NumeroDocumento=0 then cast(TD.Codigo as nvarchar(20))+ '''' '''' + TDS.CodigoSerie + ''''/'''' else TD.Codigo + '''' '''' + TDS.CodigoSerie + ''''/'''' + cast(D.NumeroDocumento as nvarchar(20)) end) as DescricaoSplitterLadoDireito, d.IDEstado,
(case when d.CodigoTipoEstado=''''ANL'''' then 0 else (case when (isnull(d.TotalClienteMoedaDocumento,0)-isnull(d.valorpago,0))<0 then 0 else (isnull(d.TotalClienteMoedaDocumento,0)-isnull(d.valorpago,0)) end) end) as ValorPendente, s.Descricao as DescricaoEstado, e1.Descricao as DescricaoEntidade1, e2.Descricao as DescricaoEntidade2, TD.IDSistemaTiposDocumento, cast(1 as bit) as FazTestesRptStkMinMax, d.CodigoTipoEstado as CodigoTipoEstado, TD.Adiantamento as Adiantamento, d.IDTipoDocumento, d.IDTiposDocumentoSeries
from tbDocumentosVendas d 
inner join tbLojas l on d.IDloja=l.id
inner join tbClientes c on d.IDEntidade=c.id
inner join tbTiposDocumento TD on d.IDTipoDocumento=td.ID
inner join tbSistemaTiposDocumento STD on TD.IDSistemaTiposDocumento=STD.ID and STD.Tipo<>''''VndServico''''
inner join tbTiposDocumentoSeries TDS on D.IDTiposDocumentoSeries=TDS.ID
left join tbEstados s on d.IDEstado=s.ID
left join tbentidades e1 on d.IDEntidade1=e1.ID
left join tbentidades e2 on d.IDEntidade2=e2.ID
''where id in (58)')

--incluir novos campos de tbartigos
EXEC('IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = ''tbArtigos'' AND COLUMN_NAME = ''Volume'') 
BEGIN
ALTER TABLE tbArtigos ADD IDTipoPeso bigint null
ALTER TABLE tbArtigos ADD PesoKg float null
ALTER TABLE tbArtigos ADD Volume float null
ALTER TABLE [dbo].[tbArtigos]  WITH CHECK ADD CONSTRAINT [FK_tbArtigos_tbSistemaTiposPrecos1] FOREIGN KEY([IDTipoPeso]) REFERENCES [dbo].[tbSistemaTiposPrecos] ([ID])
ALTER TABLE [dbo].[tbArtigos] CHECK CONSTRAINT [FK_tbArtigos_tbSistemaTiposPrecos1]
END')

--incluir novos campos de tbmapasvitas
EXEC('IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = ''tbMapasVistas'' AND COLUMN_NAME = ''SubReport'') 
BEGIN
ALTER TABLE tbMapasVistas Alter column MapaXML xml null
ALTER TABLE tbMapasVistas ADD PorDefeito bit null
ALTER TABLE tbMapasVistas ADD SubReport bit not null DEFAULT 0
END')

--atribi valores por defeito
EXEC('Update tbMapasVistas set PorDefeito=1 where isnull(IDModulo,0) = 0 and isnull(IDSistemaTipoDoc,0) = 0 and isnull(IDSistemaTipoDocFiscal,0) = 0')
EXEC('Update tbMapasVistas set SubReport=0')
EXEC('update tbMapasVistas set IDModulo = 1, PorDefeito = 1 where Entidade = ''DocumentosStockContagem''')


--alterar listas personalizadas de artigos
exec('update [F3MOGeral].dbo.tbListasPersonalizadas set query=''
select u.id as IDUunidade, u.codigo as CodigoUnidade, u.codigo as Unidade, u.Descricao as DescricaoUnidade, l.id as idloja, isnull(st.QuantidadeStock,0) as QuantidadeStock, tbartigos.ID, tbartigos.Codigo, tbartigos.Descricao, isnull(ap.ValorComIva, 0) as ValorComIva, m.Descricao as DescricaoMarca, tbartigos.IDTipoArtigo, tbartigos.IDSistemaClassificacao, tbartigos.IDMarca,
(case when sta.id=1 then ''''Lentes Oftálmicas'''' when sta.id=3 then ''''Lentes de Contato'''' when sta.id=4 then ''''Óculos de Sol'''' else sta.descricao end) DescricaoTipoArtigo, tbartigos.Ativo 
from tbartigos left join tblojas l on l.id=''''[%%IDLoja%%]'''' left join tbstockartigos st on tbartigos.id=st.IDArtigo and l.id=st.IDLoja left join tbunidades u on tbartigos.idunidade=u.id 
left join tbArtigosPrecos ap on tbartigos.id=ap.IDArtigo and ap.idcodigopreco=1 and (st.idloja=ap.IDLoja or (ap.idloja is null and not ap.idcodigopreco is null)) 
inner join tbSistemaClassificacoesTiposArtigos sta on tbartigos.IDSistemaClassificacao=sta.id 
left join tbmarcas m on tbartigos.idmarca=m.id''
where id=39')

exec('update [F3MOGeral].dbo.tbListasPersonalizadas set query=''
select u.codigo as unidade, l.id as idloja, isnull(st.QuantidadeStock,0) as QuantidadeStock, 
tbartigos.ID, tbartigos.Codigo, tbartigos.Descricao, isnull(ap.ValorComIva, 0) as ValorComIva, m.Descricao as DescricaoMarca, tbartigos.IDTipoArtigo, tbartigos.IDSistemaClassificacao, tbartigos.IDMarca,
(case when sta.id=1 then ''''Lentes Oftálmicas'''' when sta.id=3 then ''''Lentes de Contato'''' when sta.id=4 then ''''Óculos de Sol'''' else sta.descricao end) DescricaoTipoArtigo, tbartigos.Ativo 
from tbartigos left join tblojas l on l.id=''''[%%IDLoja%%]'''' left join tbstockartigos st on tbartigos.id=st.IDArtigo and l.id=st.IDLoja left join tbunidades u on tbartigos.idunidade=u.id 
left join tbArtigosPrecos ap on tbartigos.id=ap.IDArtigo and ap.idcodigopreco=1 and (st.idloja=ap.IDLoja or (ap.idloja is null and not ap.idcodigopreco is null)) 
inner join tbSistemaClassificacoesTiposArtigos sta on tbartigos.IDSistemaClassificacao=sta.id 
left join tbmarcas m on tbartigos.idmarca=m.id''
where id=63')

exec('update [F3MOGeral].dbo.tbListasPersonalizadas set query=''
select u.codigo as unidade, l.id as idloja, isnull(st.QuantidadeStock,0) as QuantidadeStock, 
tbartigos.ID, tbartigos.Codigo, tbartigos.Descricao, isnull(ap.ValorComIva, 0) as ValorComIva, m.Descricao as DescricaoMarca, mo.Descricao as DescricaoModelo, tbartigos.IDTipoArtigo, tbartigos.IDSistemaClassificacao, tbartigos.IDMarca,
(case when sta.id=1 then ''''Lentes Oftálmicas'''' when sta.id=3 then ''''Lentes de Contato'''' when sta.id=4 then ''''Óculos de Sol'''' else sta.descricao end) DescricaoTipoArtigo, tbartigos.Ativo, 
tb.Tamanho , tb.CodigoCor, tb.CorGenerica, tb.CorLente
from tbartigos left join tblojas l on l.id=''''[%%IDLoja%%]'''' left join tbstockartigos st on tbartigos.id=st.IDArtigo and l.id=st.IDLoja left join tbunidades u on tbartigos.idunidade=u.id 
left join tbArtigosPrecos ap on tbartigos.id=ap.IDArtigo and ap.idcodigopreco=1 and (st.idloja=ap.IDLoja or (ap.idloja is null and not ap.idcodigopreco is null)) 
inner join tbSistemaClassificacoesTiposArtigos sta on tbartigos.IDSistemaClassificacao=sta.id 
inner join tbAros tb on tbartigos.id=tb.IDArtigo
left join tbModelos mo on tb.IDModelo=mo.id
left join tbmarcas m on tbartigos.idmarca=m.id''
where id=59')

exec('update [F3MOGeral].dbo.tbListasPersonalizadas set query=''
select u.codigo as unidade, l.id as idloja, isnull(st.QuantidadeStock,0) as QuantidadeStock, 
tbartigos.ID, tbartigos.Codigo, tbartigos.Descricao, isnull(ap.ValorComIva, 0) as ValorComIva, m.Descricao as DescricaoMarca, mo.Descricao as DescricaoModelo, tbartigos.IDTipoArtigo, tbartigos.IDSistemaClassificacao, tbartigos.IDMarca,
(case when sta.id=1 then ''''Lentes Oftálmicas'''' when sta.id=3 then ''''Lentes de Contato'''' when sta.id=4 then ''''Óculos de Sol'''' else sta.descricao end) DescricaoTipoArtigo, tbartigos.Ativo, 
tb.Tamanho , tb.CodigoCor, tb.CorGenerica, tb.CorLente
from tbartigos left join tblojas l on l.id=''''[%%IDLoja%%]'''' left join tbstockartigos st on tbartigos.id=st.IDArtigo and l.id=st.IDLoja left join tbunidades u on tbartigos.idunidade=u.id 
left join tbArtigosPrecos ap on tbartigos.id=ap.IDArtigo and ap.idcodigopreco=1 and (st.idloja=ap.IDLoja or (ap.idloja is null and not ap.idcodigopreco is null)) 
inner join tbSistemaClassificacoesTiposArtigos sta on tbartigos.IDSistemaClassificacao=sta.id 
inner join tbOculosSol tb on tbartigos.id=tb.IDArtigo
left join tbModelos mo on tb.IDModelo=mo.id
left join tbmarcas m on tbartigos.idmarca=m.id''
where id=62')

exec('update [F3MOGeral].dbo.tbListasPersonalizadas set query=''
select u.codigo as unidade, l.id as idloja, isnull(st.QuantidadeStock,0) as QuantidadeStock, 
tbartigos.ID, tbartigos.Codigo, tbartigos.Descricao, isnull(ap.ValorComIva, 0) as ValorComIva, m.Descricao as DescricaoMarca, mo.Descricao as DescricaoModelo, tbartigos.IDTipoArtigo, tbartigos.IDSistemaClassificacao, tbartigos.IDMarca,
(case when sta.id=1 then ''''Lentes Oftálmicas'''' when sta.id=3 then ''''Lentes de Contato'''' when sta.id=4 then ''''Óculos de Sol'''' else sta.descricao end) DescricaoTipoArtigo, tbartigos.Ativo, 
tb.raio, tb.Diametro, isnull(tb.PotenciaCilindrica,0) as PotenciaCilindrica, isnull(tb.PotenciaEsferica,0) as PotenciaEsferica, isnull(tb.Eixo,0) as Eixo, isnull(tb.Adicao,0) as Adicao
from tbartigos left join tblojas l on l.id=''''[%%IDLoja%%]'''' left join tbstockartigos st on tbartigos.id=st.IDArtigo and l.id=st.IDLoja left join tbunidades u on tbartigos.idunidade=u.id 
left join tbArtigosPrecos ap on tbartigos.id=ap.IDArtigo and ap.idcodigopreco=1 and (st.idloja=ap.IDLoja or (ap.idloja is null and not ap.idcodigopreco is null)) 
inner join tbSistemaClassificacoesTiposArtigos sta on tbartigos.IDSistemaClassificacao=sta.id 
inner join tbLentesContato tb on tbartigos.id=tb.IDArtigo
left join tbModelos mo on tb.IDModelo=mo.id
left join tbmarcas m on tbartigos.idmarca=m.id''
where id=61')

exec('update [F3MOGeral].dbo.tbListasPersonalizadas set query=''
select u.codigo as unidade, l.id as idloja, isnull(st.QuantidadeStock,0) as QuantidadeStock, 
tbartigos.ID, tbartigos.Codigo, tbartigos.Descricao, isnull(ap.ValorComIva, 0) as ValorComIva, m.Descricao as DescricaoMarca, mo.Descricao as DescricaoModelo, tbartigos.IDTipoArtigo, tbartigos.IDSistemaClassificacao, tbartigos.IDMarca,
(case when sta.id=1 then ''''Lentes Oftálmicas'''' when sta.id=3 then ''''Lentes de Contato'''' when sta.id=4 then ''''Óculos de Sol'''' else sta.descricao end) DescricaoTipoArtigo, tbartigos.Ativo, 
tb.Diametro, isnull(tb.PotenciaCilindrica,0) as PotenciaCilindrica, isnull(tb.PotenciaEsferica,0) as PotenciaEsferica, isnull(tb.PotenciaPrismatica,0) as PotenciaPrismatica, isnull(tb.Adicao,0) as Adicao
from tbartigos left join tblojas l on l.id=''''[%%IDLoja%%]'''' left join tbstockartigos st on tbartigos.id=st.IDArtigo and l.id=st.IDLoja left join tbunidades u on tbartigos.idunidade=u.id 
left join tbArtigosPrecos ap on tbartigos.id=ap.IDArtigo and ap.idcodigopreco=1 and (st.idloja=ap.IDLoja or (ap.idloja is null and ap.idcodigopreco is null)) 
inner join tbSistemaClassificacoesTiposArtigos sta on tbartigos.IDSistemaClassificacao=sta.id 
inner join tbLentesoftalmicas tb on tbartigos.id=tb.IDArtigo
left join tbModelos mo on tb.IDModelo=mo.id
left join tbmarcas m on tbartigos.idmarca=m.id''
where id=60')

--inativar as vistas das etiquetas
exec('update tbmapasvistas set ativo=0 where id in (25,26,33,35,38,40)')

--inserir novas vistas de etiquetas
EXEC('
BEGIN
DECLARE @IDLoja as bigint
SELECT @IDLoja = ID FROM [tbLojas] 
DELETE FROM [dbo].[tbMapasVistas] WHERE ID=49
SET IDENTITY_INSERT [dbo].[tbMapasVistas] ON 
INSERT [dbo].[tbMapasVistas] ([ID], [Ordem], [Entidade], [Descricao], [NomeMapa], [Caminho], [Certificado], [MapaXML], [IDModulo], [IDSistemaTipoDoc], [IDSistemaTipoDocFiscal], [IDLoja], [SQLQuery], [Tabela], [Geral], [Listagem], [Ativo], [Sistema], [DataCriacao], [UtilizadorCriacao], [DataAlteracao], [UtilizadorAlteracao]) 
VALUES (49, 49, N''Etiquetas_A4_2_Colunas'', N''A4 2 Colunas'', N''A4 2 Colunas'', N''\Reporting\Reports\Oticas\DocumentosVendas\'', 0, 
''<XtraReportsLayoutSerializer SerializerVersion="18.2.7.0" Ref="1" ControlType="DevExpress.XtraReports.UI.XtraReport, DevExpress.XtraReports.v18.2, Version=18.2.7.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Name="A4 2 Colunas" ScriptsSource="Private Sub fldValorComIva_BeforePrint(ByVal sender As Object, ByVal e As System.Drawing.Printing.PrintEventArgs)&#xD;&#xA;    Me.fldValorComIva.Visible = Not (Me.CodigoArtigo.Text = String.Empty)&#xD;&#xA;End Sub&#xD;&#xA;&#xD;&#xA;Private Sub fldCodigoBarras_BeforePrint(ByVal sender As Object, ByVal e As System.Drawing.Printing.PrintEventArgs)&#xD;&#xA;    Me.fldCodigoBarras.Visible = Not (Me.CodigoArtigo.Text = String.Empty)&#xD;&#xA;End Sub" SnapGridSize="25" ReportUnit="TenthsOfAMillimeter" Margins="0, 0, 50, 0" PaperKind="A4" PageWidth="2100" PageHeight="2970" ScriptLanguage="VisualBasic" Version="19.1" DataMember="QueryBase" DataSource="#Ref-0" Dpi="254" Padding="0,0,13,0,254" Borders="All" BorderWidth="0"><Extensions><Item1 Ref="2" Key="DataSerializationExtension" Value="DevExpress.XtraReports.Web.ReportDesigner.DefaultDataSerializer" /></Extensions><Parameters><Item1 Ref="4" Description="IDDocumento" ValueInfo="10" Name="IDDocumento" Type="#Ref-3" /><Item2 Ref="5" Description="IDLoja" ValueInfo="1" Name="IDLoja" Type="#Ref-3" /><Item3 Ref="7" Description="Culture" ValueInfo="pt-PT" Name="Culture" /><Item4 Ref="8" Visible="false" Description="Via" Name="Via" /><Item5 Ref="9" Visible="false" Description="Formas" ValueInfo="select distinct tbRecibos.ID, tbRecibosFormasPagamento.IDFormaPagamento, tbFormasPagamento.Descricao, tbRecibosFormasPagamento.Valor,  tbRecibosFormasPagamento.ValorEntregue,  tbRecibosFormasPagamento.Troco from tbRecibos inner join tbRecibosFormasPagamento on tbRecibosFormasPagamento.IDRecibo= tbRecibos.ID inner join tbFormasPagamento on tbRecibosFormasPagamento.IDFormaPagamento=tbFormasPagamento.ID where tbRecibos.ID=" Name="Formas" /><Item6 Ref="11" Visible="false" Description="NumeroCasasDecimais" ValueInfo="2" Name="NumeroCasasDecimais" Type="#Ref-10" /><Item7 Ref="12" Visible="false" Description="Observacoes" ValueInfo="select ID, Observacoes from tbRecibos where ID=" Name="Observacoes" /><Item8 Ref="13" Visible="false" Description="Assinatura" ValueInfo="select ID, '''''''' as Assinatura from tbRecibos where ID=" Name="Assinatura" /><Item9 Ref="14" Visible="false" Description="BDEmpresa" Name="BDEmpresa" /><Item10 Ref="15" Visible="false" Description="Entidade" Name="Entidade" /><Item11 Ref="16" Visible="false" Description="Parameter1" ValueInfo="&quot;&quot;" Name="SQLQuery" /><Item12 Ref="17" Visible="false" Description="Parameter1" Name="TabelaTemp" /></Parameters><CalculatedFields><Item1 Ref="18" Name="CodigoArtigoFornecedor" FieldType="String" DisplayName="CodigoArtigoFornecedor" Expression="iif(isnull([CodigoFornecedor]),[CodigoArtigo], [CodigoArtigo] + '''' ('''' + [CodigoFornecedor]+ '''')'''')&#xD;&#xA;" DataMember="QueryBase" /><Item2 Ref="19" Name="CodBarras" FieldType="String" DisplayName="CodBarras" Expression="''''*''''+[CodigoBarras] + ''''*''''" DataMember="QueryBase"><Scripts Ref="20" OnGetValue="CodBarras_GetValue" /></Item2></CalculatedFields><Bands><Item1 Ref="21" ControlType="TopMarginBand" Name="TopMarginBand1" HeightF="50" Dpi="254" Padding="0,0,50,0,254"><StylePriority Ref="22" UsePadding="false" /></Item1><Item2 Ref="23" ControlType="DetailBand" Name="Detail" KeepTogetherWithDetailReports="true" KeepTogether="true" TextAlignment="TopLeft" Dpi="254" Padding="0,0,0,0,254" BorderWidth="0"><MultiColumn Ref="24" ColumnCount="2" ColumnWidth="1050" Layout="AcrossThenDown" Mode="UseColumnWidth" /><Controls><Item1 Ref="25" ControlType="XRPanel" Name="XrPanel1" CanGrow="false" SizeF="1050,93.54" LocationFloat="0, 0" Dpi="254" Borders="None"><Controls><Item1 Ref="26" ControlType="XRLabel" Name="label1" CanGrow="false" Text="label1" TextAlignment="TopLeft" SizeF="249.99,42.02" LocationFloat="749.73, 35.44" Dpi="254" Font="Arial, 5pt" ForeColor="Black" Padding="5,5,0,0,254"><ExpressionBindings><Item1 Ref="27" Expression="[DescricaoArtigo]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="28" UseFont="false" UseForeColor="false" UseTextAlignment="false" /></Item1><Item2 Ref="29" ControlType="XRLabel" Name="CodigoArtigo" Multiline="true" Text="&#xA;" SizeF="95.25,23.49" LocationFloat="332.57, 13.01" Dpi="254" Font="Times New Roman, 4pt" Padding="5,5,0,0,254" Visible="false"><ExpressionBindings><Item1 Ref="30" Expression="CodigoArtigo" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="31" UseFont="false" /></Item2><Item3 Ref="32" ControlType="XRBarCode" Name="fldCodigoBarras" Module="5.08" AutoModule="true" ShowText="false" SizeF="271.41,65" LocationFloat="48.67, 15.64" Dpi="254" Font="Arial, 2pt" Padding="0,0,0,0,254"><Symbology Ref="33" Name="Code39Extended" WideNarrowRatio="3" CalcCheckSum="false" /><ExpressionBindings><Item1 Ref="34" Expression="[CodigoBarras]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="35" UseFont="false" UsePadding="false" /><Scripts Ref="36" OnBeforePrint="fldCodigoBarras_BeforePrint" /></Item3><Item4 Ref="37" ControlType="XRLabel" Name="fldCodigoArtigo" CanGrow="false" TextAlignment="MiddleLeft" SizeF="107.49,20.85" LocationFloat="749.2, 13" Dpi="254" Font="Arial, 6pt, charSet=0" ForeColor="Black" Padding="5,5,0,0,254"><ExpressionBindings><Item1 Ref="38" Expression="[CodigoArtigo]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="39" UseFont="false" UseForeColor="false" UseTextAlignment="false" /></Item4><Item5 Ref="40" ControlType="XRLabel" Name="fldValorComIva" TextFormatString="{0:0.00€}" TextAlignment="MiddleRight" SizeF="143.8,20.33" LocationFloat="856.44, 13" Dpi="254" Font="Arial, 6pt, style=Bold" Padding="5,5,0,0,254"><Scripts Ref="41" OnBeforePrint="fldValorComIva_BeforePrint" /><ExpressionBindings><Item1 Ref="42" Expression="[ValorComIva]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="43" UseFont="false" UseTextAlignment="false" /></Item5></Controls><StylePriority Ref="44" UseBorders="false" /></Item1></Controls><StylePriority Ref="45" UsePadding="false" UseBorderWidth="false" /></Item2><Item3 Ref="46" ControlType="BottomMarginBand" Name="BottomMarginBand1" HeightF="0" Dpi="254" /></Bands><ReportPrintOptions Ref="47" DetailCountOnEmptyDataSource="80" /><ObjectStorage><Item1 ObjectType="DevExpress.XtraReports.Serialization.ObjectStorageInfo, DevExpress.XtraReports.v18.2" Ref="3" Content="System.Int64" Type="System.Type" /><Item2 ObjectType="DevExpress.XtraReports.Serialization.ObjectStorageInfo, DevExpress.XtraReports.v18.2" Ref="10" Content="System.Int32" Type="System.Type" /><Item3 Ref="0" ObjectType="DevExpress.DataAccess.Sql.SqlDataSource,DevExpress.DataAccess.v18.2" Base64="PFNxbERhdGFTb3VyY2U+PENvbm5lY3Rpb24gTmFtZT0iQ29ubmVjdGlvbiIgQ29ubmVjdGlvblN0cmluZz0iRGF0YSBTb3VyY2U9UFJJU01BLUxBQi1WTVxDMjtVc2VyIElEPUYzTU87UGFzc3dvcmQ9O0luaXRpYWwgQ2F0YWxvZyA9Nzk0N0YzTU87IiAvPjxRdWVyeSBUeXBlPSJDdXN0b21TcWxRdWVyeSIgTmFtZT0iUXVlcnlCYXNlIj48U3FsPnNlbGVjdCAqIGZyb20gdndhcnRpZ29zDQo8L1NxbD48L1F1ZXJ5PjxSZXN1bHRTY2hlbWE+PERhdGFTZXQ+PFZpZXcgTmFtZT0iUXVlcnlCYXNlIj48RmllbGQgTmFtZT0idGlwb2RvYyIgVHlwZT0iU3RyaW5nIiAvPjxGaWVsZCBOYW1lPSJJRERvY3VtZW50byIgVHlwZT0iSW50NjQiIC8+PEZpZWxkIE5hbWU9IlF1YW50aWRhZGUiIFR5cGU9IkRvdWJsZSIgLz48RmllbGQgTmFtZT0iVmFsb3JDb21JdmEiIFR5cGU9IkRvdWJsZSIgLz48RmllbGQgTmFtZT0iQ29kaWdvIiBUeXBlPSJTdHJpbmciIC8+PEZpZWxkIE5hbWU9IkNvZGlnb0JhcnJhcyIgVHlwZT0iU3RyaW5nIiAvPjxGaWVsZCBOYW1lPSJDb2RpZ29CYXJyYXNGb3JuZWNlZG9yIiBUeXBlPSJTdHJpbmciIC8+PEZpZWxkIE5hbWU9IlJlZmVyZW5jaWFGb3JuZWNlZG9yIiBUeXBlPSJTdHJpbmciIC8+PEZpZWxkIE5hbWU9IlZhbG9yQ29tSXZhMiIgVHlwZT0iRG91YmxlIiAvPjxGaWVsZCBOYW1lPSJEZXNjcmljYW9NYXJjYSIgVHlwZT0iU3RyaW5nIiAvPjwvVmlldz48L0RhdGFTZXQ+PC9SZXN1bHRTY2hlbWE+PENvbm5lY3Rpb25PcHRpb25zIENsb3NlQ29ubmVjdGlvbj0idHJ1ZSIgLz48L1NxbERhdGFTb3VyY2U+" /></ObjectStorage></XtraReportsLayoutSerializer>
''
, NULL, NULL, NULL, @IDLoja, N''select * from vwArtigos'', NULL, 0, 0, 1, 1, CAST(N''2017-01-31 00:00:00.000'' AS DateTime), N''F3M'', CAST(N''2017-01-17 16:58:42.120'' AS DateTime), N'''')
SET IDENTITY_INSERT [dbo].[tbMapasVistas] OFF
END')


EXEC('
BEGIN
DECLARE @IDLoja as bigint
SELECT @IDLoja = ID FROM [tbLojas] 
DELETE FROM [dbo].[tbMapasVistas] WHERE ID=50
SET IDENTITY_INSERT [dbo].[tbMapasVistas] ON 
INSERT [dbo].[tbMapasVistas] ([ID], [Ordem], [Entidade], [Descricao], [NomeMapa], [Caminho], [Certificado], [MapaXML], [IDModulo], [IDSistemaTipoDoc], [IDSistemaTipoDocFiscal], [IDLoja], [SQLQuery], [Tabela], [Geral], [Listagem], [Ativo], [Sistema], [DataCriacao], [UtilizadorCriacao], [DataAlteracao], [UtilizadorAlteracao]) 
VALUES (50, 50, N''Etiquetas_Rolo'', N''Rolo'', N''Rolo'', N''\Reporting\Reports\Oticas\DocumentosVendas\'', 0, 
''<XtraReportsLayoutSerializer SerializerVersion="18.2.7.0" Ref="1" ControlType="DevExpress.XtraReports.UI.XtraReport, DevExpress.XtraReports.v18.2, Version=18.2.7.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Name="Rolo" SnapGridSize="25" ReportUnit="TenthsOfAMillimeter" Margins="0, 300, 0, 0" PaperKind="Custom" PageWidth="1000" PageHeight="80" ScriptLanguage="VisualBasic" Version="19.1" DataMember="QueryBase" DataSource="#Ref-0" Dpi="254"><Extensions><Item1 Ref="2" Key="DataSerializationExtension" Value="DevExpress.XtraReports.Web.ReportDesigner.DefaultDataSerializer" /></Extensions><Parameters><Item1 Ref="4" Description="IDDocumento" ValueInfo="10" Name="IDDocumento" Type="#Ref-3" /><Item2 Ref="5" Description="IDLoja" ValueInfo="1" Name="IDLoja" Type="#Ref-3" /><Item3 Ref="7" Description="Culture" ValueInfo="pt-PT" Name="Culture" /><Item4 Ref="8" Visible="false" Description="Via" Name="Via" /><Item5 Ref="9" Visible="false" Description="Formas" ValueInfo="select distinct tbRecibos.ID, tbRecibosFormasPagamento.IDFormaPagamento, tbFormasPagamento.Descricao, tbRecibosFormasPagamento.Valor,  tbRecibosFormasPagamento.ValorEntregue,  tbRecibosFormasPagamento.Troco from tbRecibos inner join tbRecibosFormasPagamento on tbRecibosFormasPagamento.IDRecibo= tbRecibos.ID inner join tbFormasPagamento on tbRecibosFormasPagamento.IDFormaPagamento=tbFormasPagamento.ID where tbRecibos.ID=" Name="Formas" /><Item6 Ref="11" Visible="false" Description="NumeroCasasDecimais" ValueInfo="2" Name="NumeroCasasDecimais" Type="#Ref-10" /><Item7 Ref="12" Visible="false" Description="Observacoes" ValueInfo="select ID, Observacoes from tbRecibos where ID=" Name="Observacoes" /><Item8 Ref="13" Visible="false" Description="Assinatura" ValueInfo="select ID, '''''''' as Assinatura from tbRecibos where ID=" Name="Assinatura" /><Item9 Ref="14" Visible="false" Description="BDEmpresa" Name="BDEmpresa" /><Item10 Ref="15" Visible="false" Description="Entidade" Name="Entidade" /><Item11 Ref="16" Visible="false" Description="Parameter1" Name="SQLQuery" /><Item12 Ref="17" Visible="false" Description="Parameter1" Name="TabelaTemp" /></Parameters><Bands><Item1 Ref="18" ControlType="TopMarginBand" Name="TopMarginBand1" HeightF="0" Dpi="254" /><Item2 Ref="19" ControlType="DetailBand" Name="Detail" KeepTogetherWithDetailReports="true" KeepTogether="true" TextAlignment="TopLeft" Dpi="254" Padding="0,0,0,0,254"><MultiColumn Ref="20" ColumnWidth="600" Layout="AcrossThenDown" Mode="UseColumnWidth" /><Controls><Item1 Ref="21" ControlType="XRLabel" Name="label2" CanGrow="false" Text="XrLabel1" TextAlignment="MiddleLeft" SizeF="165.06,26.9" LocationFloat="329.62, 43.95" Dpi="254" Font="Arial, 4pt" Padding="5,5,0,0,254"><ExpressionBindings><Item1 Ref="22" Expression="[DescricaoMarca]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="23" UseFont="false" UseTextAlignment="false" /></Item1><Item2 Ref="24" ControlType="XRLabel" Name="label1" CanGrow="false" Text="XrLabel1" TextAlignment="MiddleLeft" SizeF="165.06,26.9" LocationFloat="329.62, 11.75" Dpi="254" Font="Arial, 4pt" Padding="5,5,0,0,254"><ExpressionBindings><Item1 Ref="25" Expression="[CodigoArtigo]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="26" UseFont="false" UseTextAlignment="false" /></Item2><Item3 Ref="27" ControlType="XRLabel" Name="XrLabel1" CanGrow="false" Text="XrLabel1" TextAlignment="MiddleCenter" SizeF="290.42,19.7" LocationFloat="31.74, 59.27" Dpi="254" Font="Arial, 4pt" Padding="5,5,0,0,254"><ExpressionBindings><Item1 Ref="28" Expression="[DescricaoArtigo]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="29" UseFont="false" UseTextAlignment="false" /></Item3><Item4 Ref="30" ControlType="XRLabel" Name="fldPV1" TextFormatString="{0:0.00€}" CanGrow="false" TextAlignment="MiddleRight" SizeF="93.12,26.91" LocationFloat="501.05, 11.75" Dpi="254" Font="Arial, 4pt" Padding="5,5,0,0,254"><ExpressionBindings><Item1 Ref="31" Expression="[ValorComIva]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="32" UseFont="false" UseTextAlignment="false" /></Item4><Item5 Ref="33" ControlType="XRBarCode" Name="fldCodigoBarras" AutoModule="true" TextAlignment="MiddleCenter" ShowText="false" Text="12345678" SizeF="291,46.52" LocationFloat="32, 11.75" Dpi="254" Font="Arial, 5.25pt, charSet=0" ForeColor="Black" Padding="0,0,0,0,254" BorderWidth="0"><Symbology Ref="34" Name="Code39Extended" WideNarrowRatio="3" CalcCheckSum="false" /><ExpressionBindings><Item1 Ref="35" Expression="[CodigoBarras]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="36" UseFont="false" UseForeColor="false" UsePadding="false" UseBorderWidth="false" UseTextAlignment="false" /></Item5></Controls><StylePriority Ref="37" UsePadding="false" /></Item2><Item3 Ref="38" ControlType="BottomMarginBand" Name="BottomMarginBand1" HeightF="0" Dpi="254" /></Bands><ReportPrintOptions Ref="39" DetailCountOnEmptyDataSource="0" /><ObjectStorage><Item1 ObjectType="DevExpress.XtraReports.Serialization.ObjectStorageInfo, DevExpress.XtraReports.v18.2" Ref="3" Content="System.Int64" Type="System.Type" /><Item2 ObjectType="DevExpress.XtraReports.Serialization.ObjectStorageInfo, DevExpress.XtraReports.v18.2" Ref="10" Content="System.Int32" Type="System.Type" /><Item3 Ref="0" ObjectType="DevExpress.DataAccess.Sql.SqlDataSource,DevExpress.DataAccess.v18.2" Base64="PFNxbERhdGFTb3VyY2U+PENvbm5lY3Rpb24gTmFtZT0iQ29ubmVjdGlvbiIgQ29ubmVjdGlvblN0cmluZz0iRGF0YSBTb3VyY2U9RFNJLVNRTC0wMVxGM00yMDE0O1VzZXIgSUQ9RjNNTztQYXNzd29yZD07SW5pdGlhbCBDYXRhbG9nID0xMDAwMEYzTU87IiAvPjxRdWVyeSBUeXBlPSJDdXN0b21TcWxRdWVyeSIgTmFtZT0iUXVlcnlCYXNlIj48U3FsPnNlbGVjdCAqIGZyb20gdndBcnRpZ29zPC9TcWw+PC9RdWVyeT48UmVzdWx0U2NoZW1hPjxEYXRhU2V0PjxWaWV3IE5hbWU9IlF1ZXJ5QmFzZSI+PEZpZWxkIE5hbWU9InRpcG9kb2MiIFR5cGU9IlN0cmluZyIgLz48RmllbGQgTmFtZT0iSUREb2N1bWVudG8iIFR5cGU9IkludDY0IiAvPjxGaWVsZCBOYW1lPSJRdWFudGlkYWRlIiBUeXBlPSJEb3VibGUiIC8+PEZpZWxkIE5hbWU9IlZhbG9yQ29tSXZhIiBUeXBlPSJEb3VibGUiIC8+PEZpZWxkIE5hbWU9IkNvZGlnbyIgVHlwZT0iU3RyaW5nIiAvPjxGaWVsZCBOYW1lPSJDb2RpZ29CYXJyYXMiIFR5cGU9IlN0cmluZyIgLz48RmllbGQgTmFtZT0iQ29kaWdvQmFycmFzRm9ybmVjZWRvciIgVHlwZT0iU3RyaW5nIiAvPjxGaWVsZCBOYW1lPSJSZWZlcmVuY2lhRm9ybmVjZWRvciIgVHlwZT0iU3RyaW5nIiAvPjxGaWVsZCBOYW1lPSJWYWxvckNvbUl2YTIiIFR5cGU9IkRvdWJsZSIgLz48RmllbGQgTmFtZT0iRGVzY3JpY2FvTWFyY2EiIFR5cGU9IlN0cmluZyIgLz48L1ZpZXc+PC9EYXRhU2V0PjwvUmVzdWx0U2NoZW1hPjxDb25uZWN0aW9uT3B0aW9ucyBDbG9zZUNvbm5lY3Rpb249InRydWUiIC8+PC9TcWxEYXRhU291cmNlPg==" /></ObjectStorage></XtraReportsLayoutSerializer>
''
, NULL, NULL, NULL, @IDLoja, N''select * from vwArtigos'', NULL, 0, 0, 1, 1, CAST(N''2017-01-31 00:00:00.000'' AS DateTime), N''F3M'', CAST(N''2017-01-17 16:58:42.120'' AS DateTime), N'''')
SET IDENTITY_INSERT [dbo].[tbMapasVistas] OFF
END')

EXEC('
BEGIN
DECLARE @IDLoja as bigint
SELECT @IDLoja = ID FROM [tbLojas] 
DELETE FROM [dbo].[tbMapasVistas] WHERE ID=51
SET IDENTITY_INSERT [dbo].[tbMapasVistas] ON 
INSERT [dbo].[tbMapasVistas] ([ID], [Ordem], [Entidade], [Descricao], [NomeMapa], [Caminho], [Certificado], [MapaXML], [IDModulo], [IDSistemaTipoDoc], [IDSistemaTipoDocFiscal], [IDLoja], [SQLQuery], [Tabela], [Geral], [Listagem], [Ativo], [Sistema], [DataCriacao], [UtilizadorCriacao], [DataAlteracao], [UtilizadorAlteracao]) 
VALUES (51, 51, N''Etiquetas_A4_5_Colunas'', N''A4 5 Colunas CB'', N''A4 5 Colunas CB'', N''\Reporting\Reports\Oticas\DocumentosVendas\'', 0, 
''<XtraReportsLayoutSerializer SerializerVersion="18.2.7.0" Ref="1" ControlType="DevExpress.XtraReports.UI.XtraReport, DevExpress.XtraReports.v18.2, Version=18.2.7.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Name="A4 5 Colunas CB" ScriptsSource="Private Sub fldValorComIva_BeforePrint(ByVal sender As Object, ByVal e As System.Drawing.Printing.PrintEventArgs)&#xD;&#xA;    Me.fldValorComIva.Visible = Not (Me.lblCodigoArtigo.Text = String.Empty)&#xD;&#xA;End Sub&#xD;&#xA;&#xD;&#xA;Private Sub fldCodigoBarras_BeforePrint(ByVal sender As Object, ByVal e As System.Drawing.Printing.PrintEventArgs)&#xD;&#xA;    Me.fldCodigoBarras.Visible = Not (Me.lblCodigoArtigo.Text = String.Empty)&#xD;&#xA;End Sub&#xD;&#xA;" SnapGridSize="25" ReportUnit="TenthsOfAMillimeter" Margins="108, 62, 164, 60" PaperKind="A4" PageWidth="2100" PageHeight="2970" ScriptLanguage="VisualBasic" Version="19.1" DataMember="QueryBase" DataSource="#Ref-0" Dpi="254"><Extensions><Item1 Ref="2" Key="DataSerializationExtension" Value="DevExpress.XtraReports.Web.ReportDesigner.DefaultDataSerializer" /></Extensions><Parameters><Item1 Ref="4" Description="IDDocumento" ValueInfo="10" Name="IDDocumento" Type="#Ref-3" /><Item2 Ref="5" Description="IDLoja" ValueInfo="1" Name="IDLoja" Type="#Ref-3" /><Item3 Ref="7" Description="Culture" ValueInfo="pt-PT" Name="Culture" /><Item4 Ref="8" Visible="false" Description="Via" Name="Via" /><Item5 Ref="9" Visible="false" Description="Formas" ValueInfo="select distinct tbRecibos.ID, tbRecibosFormasPagamento.IDFormaPagamento, tbFormasPagamento.Descricao, tbRecibosFormasPagamento.Valor,  tbRecibosFormasPagamento.ValorEntregue,  tbRecibosFormasPagamento.Troco from tbRecibos inner join tbRecibosFormasPagamento on tbRecibosFormasPagamento.IDRecibo= tbRecibos.ID inner join tbFormasPagamento on tbRecibosFormasPagamento.IDFormaPagamento=tbFormasPagamento.ID where tbRecibos.ID=" Name="Formas" /><Item6 Ref="11" Visible="false" Description="NumeroCasasDecimais" ValueInfo="2" Name="NumeroCasasDecimais" Type="#Ref-10" /><Item7 Ref="12" Visible="false" Description="Observacoes" ValueInfo="select ID, Observacoes from tbRecibos where ID=" Name="Observacoes" /><Item8 Ref="13" Visible="false" Description="Assinatura" ValueInfo="select ID, '''''''' as Assinatura from tbRecibos where ID=" Name="Assinatura" /><Item9 Ref="14" Visible="false" Description="BDEmpresa" Name="BDEmpresa" /><Item10 Ref="15" Visible="false" Description="Entidade" Name="Entidade" /><Item11 Ref="16" Visible="false" Description="Parameter1" ValueInfo="&quot;&quot;" Name="SQLQuery" /><Item12 Ref="17" Visible="false" Description="Parameter1" Name="TabelaTemp" /></Parameters><CalculatedFields><Item1 Ref="18" Name="CodigoArtigoFornecedor" FieldType="String" DisplayName="CodigoArtigoFornecedor" Expression="iif(isnull([CodigoFornecedor]),[CodigoArtigo], [CodigoArtigo] + '''' ('''' + [CodigoFornecedor]+ '''')'''')&#xD;&#xA;" DataMember="QueryBase" /><Item2 Ref="19" Name="CodBarras" FieldType="String" DisplayName="CodBarras" Expression="''''*''''+[CodigoBarras] + ''''*''''" DataMember="QueryBase"><Scripts Ref="20" OnGetValue="CodBarras_GetValue" /></Item2></CalculatedFields><Bands><Item1 Ref="21" ControlType="TopMarginBand" Name="TopMarginBand1" HeightF="164" Dpi="254" /><Item2 Ref="22" ControlType="DetailBand" Name="Detail" KeepTogetherWithDetailReports="true" HeightF="165" KeepTogether="true" TextAlignment="TopLeft" Dpi="254" Padding="0,0,0,0,254"><MultiColumn Ref="23" ColumnWidth="380" Layout="AcrossThenDown" Mode="UseColumnWidth" /><Controls><Item1 Ref="24" ControlType="XRPanel" Name="XrPanel1" CanGrow="false" SizeF="380,165" LocationFloat="0, 0" Dpi="254" Borders="None"><Controls><Item1 Ref="25" ControlType="XRLabel" Name="lblCodigoArtigo" CanGrow="false" Text="lblCodigoArtigo" SizeF="215.21,36" LocationFloat="20.42, 19.64" Dpi="254" Font="Arial, 6pt, charSet=0" Padding="5,5,0,0,254"><Scripts Ref="26" OnBeforePrint="lblCodigoArtigo_BeforePrint" /><ExpressionBindings><Item1 Ref="27" Expression="[CodigoArtigoFornecedor]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="28" UseFont="false" /></Item1><Item2 Ref="29" ControlType="XRLabel" Name="label1" TextFormatString="{0:€0.00}" CanGrow="false" Text="label1" TextAlignment="MiddleCenter" SizeF="298.67,36.12685" LocationFloat="20.42, 120.39" Dpi="254" Font="Arial, 6pt" Padding="5,5,0,0,254"><Scripts Ref="30" OnBeforePrint="fldValorComIva_BeforePrint" /><ExpressionBindings><Item1 Ref="31" Expression="[DescricaoArtigo]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="32" UseFont="false" UseTextAlignment="false" /></Item2><Item3 Ref="33" ControlType="XRBarCode" Name="fldCodigoBarras" Module="5.08" AutoModule="true" ShowText="false" SizeF="300,65" LocationFloat="20.43254, 55.41" Dpi="254" Font="Arial, 3pt, charSet=0" Padding="0,0,0,0,254"><Symbology Ref="34" Name="Code39Extended" WideNarrowRatio="3" CalcCheckSum="false" /><ExpressionBindings><Item1 Ref="35" Expression="[CodigoBarras]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="36" UseFont="false" UsePadding="false" /><Scripts Ref="37" OnBeforePrint="fldCodigoBarras_BeforePrint" /></Item3><Item4 Ref="38" ControlType="XRLabel" Name="fldCodigoArtigo" TextAlignment="TopLeft" SizeF="59.39,19.12" LocationFloat="20.41, 0" Dpi="254" Font="Arial, 6pt, charSet=0" ForeColor="Black" Padding="5,5,0,0,254" Visible="false"><ExpressionBindings><Item1 Ref="39" Expression="[CodigoArtigo]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="40" UseFont="false" UseForeColor="false" UseTextAlignment="false" /></Item4><Item5 Ref="41" ControlType="XRLabel" Name="fldValorComIva" TextFormatString="{0:0.00€}" TextAlignment="TopRight" SizeF="106.2056,36.12685" LocationFloat="245.43, 19.65" Dpi="254" Font="Arial, 6pt, style=Bold" Padding="5,5,0,0,254"><Scripts Ref="42" OnBeforePrint="fldValorComIva_BeforePrint" /><ExpressionBindings><Item1 Ref="43" Expression="[ValorComIva]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="44" UseFont="false" UseTextAlignment="false" /></Item5></Controls><StylePriority Ref="45" UseBorders="false" /></Item1></Controls><StylePriority Ref="46" UsePadding="false" /></Item2><Item3 Ref="47" ControlType="BottomMarginBand" Name="BottomMarginBand1" HeightF="60" Dpi="254" /></Bands><ReportPrintOptions Ref="48" DetailCountOnEmptyDataSource="80" /><ObjectStorage><Item1 ObjectType="DevExpress.XtraReports.Serialization.ObjectStorageInfo, DevExpress.XtraReports.v18.2" Ref="3" Content="System.Int64" Type="System.Type" /><Item2 ObjectType="DevExpress.XtraReports.Serialization.ObjectStorageInfo, DevExpress.XtraReports.v18.2" Ref="10" Content="System.Int32" Type="System.Type" /><Item3 Ref="0" ObjectType="DevExpress.DataAccess.Sql.SqlDataSource,DevExpress.DataAccess.v18.2" Base64="PFNxbERhdGFTb3VyY2U+PENvbm5lY3Rpb24gTmFtZT0iQ29ubmVjdGlvbiIgQ29ubmVjdGlvblN0cmluZz0iRGF0YSBTb3VyY2U9RFNJLVNRTC0wMVxGM00yMDE0O1VzZXIgSUQ9RjNNTztQYXNzd29yZD07SW5pdGlhbCBDYXRhbG9nID0xMDAwMEYzTU87IiAvPjxRdWVyeSBUeXBlPSJDdXN0b21TcWxRdWVyeSIgTmFtZT0iUXVlcnlCYXNlIj48U3FsPnNlbGVjdCAqIGZyb20gdndhcnRpZ29zDQo8L1NxbD48L1F1ZXJ5PjxSZXN1bHRTY2hlbWE+PERhdGFTZXQ+PFZpZXcgTmFtZT0iUXVlcnlCYXNlIj48RmllbGQgTmFtZT0idGlwb2RvYyIgVHlwZT0iU3RyaW5nIiAvPjxGaWVsZCBOYW1lPSJJRERvY3VtZW50byIgVHlwZT0iSW50NjQiIC8+PEZpZWxkIE5hbWU9IlF1YW50aWRhZGUiIFR5cGU9IkRvdWJsZSIgLz48RmllbGQgTmFtZT0iVmFsb3JDb21JdmEiIFR5cGU9IkRvdWJsZSIgLz48RmllbGQgTmFtZT0iQ29kaWdvIiBUeXBlPSJTdHJpbmciIC8+PEZpZWxkIE5hbWU9IkNvZGlnb0JhcnJhcyIgVHlwZT0iU3RyaW5nIiAvPjxGaWVsZCBOYW1lPSJDb2RpZ29CYXJyYXNGb3JuZWNlZG9yIiBUeXBlPSJTdHJpbmciIC8+PEZpZWxkIE5hbWU9IlJlZmVyZW5jaWFGb3JuZWNlZG9yIiBUeXBlPSJTdHJpbmciIC8+PEZpZWxkIE5hbWU9IlZhbG9yQ29tSXZhMiIgVHlwZT0iRG91YmxlIiAvPjxGaWVsZCBOYW1lPSJEZXNjcmljYW9NYXJjYSIgVHlwZT0iU3RyaW5nIiAvPjwvVmlldz48L0RhdGFTZXQ+PC9SZXN1bHRTY2hlbWE+PENvbm5lY3Rpb25PcHRpb25zIENsb3NlQ29ubmVjdGlvbj0idHJ1ZSIgLz48L1NxbERhdGFTb3VyY2U+" /></ObjectStorage></XtraReportsLayoutSerializer>
''
, NULL, NULL, NULL, @IDLoja, N''select * from vwArtigos'', NULL, 0, 0, 1, 1, CAST(N''2017-01-31 00:00:00.000'' AS DateTime), N''F3M'', CAST(N''2017-01-17 16:58:42.120'' AS DateTime), N'''')
SET IDENTITY_INSERT [dbo].[tbMapasVistas] OFF
END')

EXEC('
BEGIN
DECLARE @IDLoja as bigint
SELECT @IDLoja = ID FROM [tbLojas] 
DELETE FROM [dbo].[tbMapasVistas] WHERE ID=52
SET IDENTITY_INSERT [dbo].[tbMapasVistas] ON 
INSERT [dbo].[tbMapasVistas] ([ID], [Ordem], [Entidade], [Descricao], [NomeMapa], [Caminho], [Certificado], [MapaXML], [IDModulo], [IDSistemaTipoDoc], [IDSistemaTipoDocFiscal], [IDLoja], [SQLQuery], [Tabela], [Geral], [Listagem], [Ativo], [Sistema], [DataCriacao], [UtilizadorCriacao], [DataAlteracao], [UtilizadorAlteracao]) 
VALUES (52, 52, N''Etiquetas_A4_5_Colunas'', N''A4 5 Colunas'', N''A4 5 Colunas'', N''\Reporting\Reports\Oticas\DocumentosVendas\'', 0, 
''<XtraReportsLayoutSerializer SerializerVersion="18.2.7.0" Ref="1" ControlType="DevExpress.XtraReports.UI.XtraReport, DevExpress.XtraReports.v18.2, Version=18.2.7.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Name="A4 5 Colunas" ScriptsSource="Private Sub fldValorComIva_BeforePrint(ByVal sender As Object, ByVal e As System.Drawing.Printing.PrintEventArgs)&#xD;&#xA;    Me.fldValorComIva.Visible = Not (Me.fldCodigoArtigo.Text = String.Empty)&#xD;&#xA;End Sub&#xD;&#xA;" SnapGridSize="25" ReportUnit="TenthsOfAMillimeter" Margins="108, 62, 164, 60" PaperKind="A4" PageWidth="2100" PageHeight="2970" ScriptLanguage="VisualBasic" Version="19.1" DataMember="QueryBase" DataSource="#Ref-0" Dpi="254"><Extensions><Item1 Ref="2" Key="DataSerializationExtension" Value="DevExpress.XtraReports.Web.ReportDesigner.DefaultDataSerializer" /></Extensions><Parameters><Item1 Ref="4" Description="IDDocumento" ValueInfo="10" Name="IDDocumento" Type="#Ref-3" /><Item2 Ref="5" Description="IDLoja" ValueInfo="1" Name="IDLoja" Type="#Ref-3" /><Item3 Ref="7" Description="Culture" ValueInfo="pt-PT" Name="Culture" /><Item4 Ref="8" Visible="false" Description="Via" Name="Via" /><Item5 Ref="9" Visible="false" Description="Formas" ValueInfo="select distinct tbRecibos.ID, tbRecibosFormasPagamento.IDFormaPagamento, tbFormasPagamento.Descricao, tbRecibosFormasPagamento.Valor,  tbRecibosFormasPagamento.ValorEntregue,  tbRecibosFormasPagamento.Troco from tbRecibos inner join tbRecibosFormasPagamento on tbRecibosFormasPagamento.IDRecibo= tbRecibos.ID inner join tbFormasPagamento on tbRecibosFormasPagamento.IDFormaPagamento=tbFormasPagamento.ID where tbRecibos.ID=" Name="Formas" /><Item6 Ref="11" Visible="false" Description="NumeroCasasDecimais" ValueInfo="2" Name="NumeroCasasDecimais" Type="#Ref-10" /><Item7 Ref="12" Visible="false" Description="Observacoes" ValueInfo="select ID, Observacoes from tbRecibos where ID=" Name="Observacoes" /><Item8 Ref="13" Visible="false" Description="Assinatura" ValueInfo="select ID, '''''''' as Assinatura from tbRecibos where ID=" Name="Assinatura" /><Item9 Ref="14" Visible="false" Description="BDEmpresa" Name="BDEmpresa" /><Item10 Ref="15" Visible="false" Description="Entidade" Name="Entidade" /><Item11 Ref="16" Visible="false" Description="Parameter1" ValueInfo="&quot;&quot;" Name="SQLQuery" /><Item12 Ref="17" Visible="false" Description="Parameter1" Name="TabelaTemp" /></Parameters><CalculatedFields><Item1 Ref="18" Name="CodigoArtigoFornecedor" FieldType="String" DisplayName="CodigoArtigoFornecedor" Expression="iif(isnull([CodigoFornecedor]),[CodigoArtigo], [CodigoArtigo] + '''' ('''' + [CodigoFornecedor]+ '''')'''')&#xD;&#xA;" DataMember="QueryBase" /><Item2 Ref="19" Name="CodBarras" FieldType="String" DisplayName="CodBarras" Expression="''''*''''+[CodigoBarras] + ''''*''''" DataMember="QueryBase"><Scripts Ref="20" OnGetValue="CodBarras_GetValue" /></Item2></CalculatedFields><Bands><Item1 Ref="21" ControlType="TopMarginBand" Name="TopMarginBand1" HeightF="164" Dpi="254" /><Item2 Ref="22" ControlType="DetailBand" Name="Detail" KeepTogetherWithDetailReports="true" HeightF="165" KeepTogether="true" TextAlignment="TopLeft" Dpi="254" Padding="0,0,0,0,254"><MultiColumn Ref="23" ColumnWidth="380" Layout="AcrossThenDown" Mode="UseColumnWidth" /><Controls><Item1 Ref="24" ControlType="XRPanel" Name="XrPanel1" CanGrow="false" SizeF="380,165" LocationFloat="0, 0" Dpi="254" Borders="None"><Controls><Item1 Ref="25" ControlType="XRLabel" Name="label1" TextFormatString="{0:€0.00}" CanGrow="false" Text="label1" TextAlignment="TopLeft" SizeF="330.68,82.14" LocationFloat="20.42, 59.12" Dpi="254" Font="Arial, 6pt" Padding="5,5,0,0,254"><Scripts Ref="26" OnBeforePrint="fldValorComIva_BeforePrint" /><ExpressionBindings><Item1 Ref="27" Expression="[DescricaoArtigo]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="28" UseFont="false" UseTextAlignment="false" /></Item1><Item2 Ref="29" ControlType="XRLabel" Name="fldCodigoArtigo" TextAlignment="MiddleLeft" SizeF="207.5,34.8" LocationFloat="20.41, 19.64" Dpi="254" Font="Arial, 6pt, charSet=0" ForeColor="Black" Padding="5,5,0,0,254"><ExpressionBindings><Item1 Ref="30" Expression="[CodigoArtigo]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="31" UseFont="false" UseForeColor="false" UseTextAlignment="false" /></Item2><Item3 Ref="32" ControlType="XRLabel" Name="fldValorComIva" TextFormatString="{0:0.00€}" TextAlignment="MiddleRight" SizeF="106.2056,36.12685" LocationFloat="245.43, 19.65" Dpi="254" Font="Arial, 6pt, style=Bold" Padding="5,5,0,0,254"><Scripts Ref="33" OnBeforePrint="fldValorComIva_BeforePrint" /><ExpressionBindings><Item1 Ref="34" Expression="[ValorComIva]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="35" UseFont="false" UseTextAlignment="false" /></Item3></Controls><StylePriority Ref="36" UseBorders="false" /></Item1></Controls><StylePriority Ref="37" UsePadding="false" /></Item2><Item3 Ref="38" ControlType="BottomMarginBand" Name="BottomMarginBand1" HeightF="60" Dpi="254" /></Bands><ReportPrintOptions Ref="39" DetailCountOnEmptyDataSource="80" /><ObjectStorage><Item1 ObjectType="DevExpress.XtraReports.Serialization.ObjectStorageInfo, DevExpress.XtraReports.v18.2" Ref="3" Content="System.Int64" Type="System.Type" /><Item2 ObjectType="DevExpress.XtraReports.Serialization.ObjectStorageInfo, DevExpress.XtraReports.v18.2" Ref="10" Content="System.Int32" Type="System.Type" /><Item3 Ref="0" ObjectType="DevExpress.DataAccess.Sql.SqlDataSource,DevExpress.DataAccess.v18.2" Base64="PFNxbERhdGFTb3VyY2U+PENvbm5lY3Rpb24gTmFtZT0iQ29ubmVjdGlvbiIgQ29ubmVjdGlvblN0cmluZz0iRGF0YSBTb3VyY2U9RFNJLVNRTC0wMVxGM00yMDE0O1VzZXIgSUQ9RjNNTztQYXNzd29yZD07SW5pdGlhbCBDYXRhbG9nID0xMDAwMEYzTU87IiAvPjxRdWVyeSBUeXBlPSJDdXN0b21TcWxRdWVyeSIgTmFtZT0iUXVlcnlCYXNlIj48U3FsPnNlbGVjdCAqIGZyb20gdndhcnRpZ29zDQo8L1NxbD48L1F1ZXJ5PjxSZXN1bHRTY2hlbWE+PERhdGFTZXQ+PFZpZXcgTmFtZT0iUXVlcnlCYXNlIj48RmllbGQgTmFtZT0idGlwb2RvYyIgVHlwZT0iU3RyaW5nIiAvPjxGaWVsZCBOYW1lPSJJRERvY3VtZW50byIgVHlwZT0iSW50NjQiIC8+PEZpZWxkIE5hbWU9IlF1YW50aWRhZGUiIFR5cGU9IkRvdWJsZSIgLz48RmllbGQgTmFtZT0iVmFsb3JDb21JdmEiIFR5cGU9IkRvdWJsZSIgLz48RmllbGQgTmFtZT0iQ29kaWdvIiBUeXBlPSJTdHJpbmciIC8+PEZpZWxkIE5hbWU9IkNvZGlnb0JhcnJhcyIgVHlwZT0iU3RyaW5nIiAvPjxGaWVsZCBOYW1lPSJDb2RpZ29CYXJyYXNGb3JuZWNlZG9yIiBUeXBlPSJTdHJpbmciIC8+PEZpZWxkIE5hbWU9IlJlZmVyZW5jaWFGb3JuZWNlZG9yIiBUeXBlPSJTdHJpbmciIC8+PEZpZWxkIE5hbWU9IlZhbG9yQ29tSXZhMiIgVHlwZT0iRG91YmxlIiAvPjxGaWVsZCBOYW1lPSJEZXNjcmljYW9NYXJjYSIgVHlwZT0iU3RyaW5nIiAvPjwvVmlldz48L0RhdGFTZXQ+PC9SZXN1bHRTY2hlbWE+PENvbm5lY3Rpb25PcHRpb25zIENsb3NlQ29ubmVjdGlvbj0idHJ1ZSIgLz48L1NxbERhdGFTb3VyY2U+" /></ObjectStorage></XtraReportsLayoutSerializer>
''
, NULL, NULL, NULL, @IDLoja, N''select * from vwArtigos'', NULL, 0, 0, 1, 1, CAST(N''2017-01-31 00:00:00.000'' AS DateTime), N''F3M'', CAST(N''2017-01-17 16:58:42.120'' AS DateTime), N'''')
SET IDENTITY_INSERT [dbo].[tbMapasVistas] OFF
END')

EXEC('
BEGIN
DECLARE @IDLoja as bigint
SELECT @IDLoja = ID FROM [tbLojas] 
DELETE FROM [dbo].[tbMapasVistas] WHERE ID=53
SET IDENTITY_INSERT [dbo].[tbMapasVistas] ON 
INSERT [dbo].[tbMapasVistas] ([ID], [Ordem], [Entidade], [Descricao], [NomeMapa], [Caminho], [Certificado], [MapaXML], [IDModulo], [IDSistemaTipoDoc], [IDSistemaTipoDocFiscal], [IDLoja], [SQLQuery], [Tabela], [Geral], [Listagem], [Ativo], [Sistema], [DataCriacao], [UtilizadorCriacao], [DataAlteracao], [UtilizadorAlteracao]) 
VALUES (53, 53, N''Etiquetas_A4_6_Colunas'', N''A4 6 Colunas'', N''A4 6 Colunas'', N''\Reporting\Reports\Oticas\DocumentosVendas\'', 0, 
''<XtraReportsLayoutSerializer SerializerVersion="18.2.7.0" Ref="1" ControlType="DevExpress.XtraReports.UI.XtraReport, DevExpress.XtraReports.v18.2, Version=18.2.7.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Name="A4 6 Colunas" ScriptsSource="&#xD;&#xA;Private Sub fldPreco_BeforePrint(ByVal sender As Object, ByVal e As System.Drawing.Printing.PrintEventArgs)&#xD;&#xA;    fldPreco.Visible = Not (CodigoArtigo.Text = String.Empty)&#xD;&#xA;End Sub&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Private Sub fldCodigoBarras_BeforePrint(ByVal sender As Object, ByVal e As System.Drawing.Printing.PrintEventArgs)&#xD;&#xA;    fldCodigoBarras.Visible = Not (CodigoArtigo.Text = String.Empty)&#xD;&#xA;End Sub" SnapGridSize="0.254" ReportUnit="TenthsOfAMillimeter" Margins="0, 0, 90, 190" PaperKind="A4" PageWidth="2100" PageHeight="2970" ScriptLanguage="VisualBasic" Version="19.1" DataMember="QueryBase" DataSource="#Ref-0" Dpi="254"><Extensions><Item1 Ref="2" Key="DataSerializationExtension" Value="DevExpress.XtraReports.Web.ReportDesigner.DefaultDataSerializer" /></Extensions><Parameters><Item1 Ref="4" Description="IDDocumento" ValueInfo="10" Name="IDDocumento" Type="#Ref-3" /><Item2 Ref="5" Description="IDLoja" ValueInfo="1" Name="IDLoja" Type="#Ref-3" /><Item3 Ref="7" Description="Culture" ValueInfo="pt-PT" Name="Culture" /><Item4 Ref="8" Visible="false" Description="Via" Name="Via" /><Item5 Ref="9" Visible="false" Description="Formas" ValueInfo="select distinct tbRecibos.ID, tbRecibosFormasPagamento.IDFormaPagamento, tbFormasPagamento.Descricao, tbRecibosFormasPagamento.Valor,  tbRecibosFormasPagamento.ValorEntregue,  tbRecibosFormasPagamento.Troco from tbRecibos inner join tbRecibosFormasPagamento on tbRecibosFormasPagamento.IDRecibo= tbRecibos.ID inner join tbFormasPagamento on tbRecibosFormasPagamento.IDFormaPagamento=tbFormasPagamento.ID where tbRecibos.ID=" Name="Formas" /><Item6 Ref="11" Visible="false" Description="NumeroCasasDecimais" ValueInfo="2" Name="NumeroCasasDecimais" Type="#Ref-10" /><Item7 Ref="12" Visible="false" Description="Observacoes" ValueInfo="select ID, Observacoes from tbRecibos where ID=" Name="Observacoes" /><Item8 Ref="13" Visible="false" Description="Assinatura" ValueInfo="select ID, '''''''' as Assinatura from tbRecibos where ID=" Name="Assinatura" /><Item9 Ref="14" Visible="false" Description="BDEmpresa" Name="BDEmpresa" /><Item10 Ref="15" Visible="false" Description="Entidade" Name="Entidade" /><Item11 Ref="16" Visible="false" Description="Parameter1" ValueInfo="&quot;&quot;" Name="SQLQuery" /><Item12 Ref="17" Visible="false" Description="Parameter1" Name="TabelaTemp" /></Parameters><Bands><Item1 Ref="18" ControlType="TopMarginBand" Name="TopMarginBand1" HeightF="90" Dpi="254" /><Item2 Ref="19" ControlType="DetailBand" Name="Detail" KeepTogetherWithDetailReports="true" HeightF="105" KeepTogether="true" TextAlignment="TopLeft" Dpi="254" Padding="0,0,0,0,254"><MultiColumn Ref="20" ColumnWidth="350" Layout="AcrossThenDown" Mode="UseColumnWidth" /><Scripts Ref="21" OnBeforePrint="Detail_BeforePrint" /><Controls><Item1 Ref="22" ControlType="XRPanel" Name="XrPanel1" CanGrow="false" SizeF="350,105" LocationFloat="0, 0" Dpi="254" Padding="0,0,0,0,254" Borders="None"><Controls><Item1 Ref="23" ControlType="XRLabel" Name="CodigoArtigo" CanGrow="false" Text="label1" TextAlignment="MiddleLeft" SizeF="179.49,24.37" LocationFloat="37, 69.66" Dpi="254" Font="Arial, 5.25pt, charSet=0" Padding="5,5,0,0,254"><Scripts Ref="24" OnBeforePrint="fldPreco_BeforePrint" /><ExpressionBindings><Item1 Ref="25" Expression="[CodigoArtigo]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="26" UseFont="false" UseTextAlignment="false" /></Item1><Item2 Ref="27" ControlType="XRLabel" Name="fldPreco" TextFormatString="{0:0.00€}" CanGrow="false" TextAlignment="MiddleRight" SizeF="101.19,23.85" LocationFloat="224.33, 69.66" Dpi="254" Font="Arial, 5.25pt, charSet=0" Padding="5,5,0,0,254"><Scripts Ref="28" OnBeforePrint="fldPreco_BeforePrint" /><ExpressionBindings><Item1 Ref="29" Expression="[ValorComIva]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="30" UseFont="false" UseTextAlignment="false" /></Item2><Item3 Ref="31" ControlType="XRBarCode" Name="fldCodigoBarras" Module="4.08" AutoModule="true" ShowText="false" SizeF="248.75,58.63" LocationFloat="55.55, 10.5" Dpi="254" Font="Arial, 4pt" Padding="0,0,0,0,254"><Symbology Ref="32" Name="Code39Extended" WideNarrowRatio="2" CalcCheckSum="false" /><ExpressionBindings><Item1 Ref="33" Expression="[CodigoBarras]" PropertyName="Text" EventName="BeforePrint" /></ExpressionBindings><StylePriority Ref="34" UseFont="false" UsePadding="false" /><Scripts Ref="35" OnBeforePrint="fldCodigoBarras_BeforePrint" /></Item3></Controls><StylePriority Ref="36" UsePadding="false" UseBorders="false" /></Item1></Controls><StylePriority Ref="37" UsePadding="false" /></Item2><Item3 Ref="38" ControlType="BottomMarginBand" Name="BottomMarginBand1" HeightF="190" Dpi="254" Visible="false" /></Bands><ReportPrintOptions Ref="39" DetailCountOnEmptyDataSource="156" /><ObjectStorage><Item1 ObjectType="DevExpress.XtraReports.Serialization.ObjectStorageInfo, DevExpress.XtraReports.v18.2" Ref="3" Content="System.Int64" Type="System.Type" /><Item2 ObjectType="DevExpress.XtraReports.Serialization.ObjectStorageInfo, DevExpress.XtraReports.v18.2" Ref="10" Content="System.Int32" Type="System.Type" /><Item3 Ref="0" ObjectType="DevExpress.DataAccess.Sql.SqlDataSource,DevExpress.DataAccess.v18.2" Base64="PFNxbERhdGFTb3VyY2U+PENvbm5lY3Rpb24gTmFtZT0iQ29ubmVjdGlvbiIgQ29ubmVjdGlvblN0cmluZz0iRGF0YSBTb3VyY2U9UFJJU01BLUxBQi1WTVxDMjtVc2VyIElEPUYzTU87UGFzc3dvcmQ9O0luaXRpYWwgQ2F0YWxvZyA9Nzk0N0YzTU87IiAvPjxRdWVyeSBUeXBlPSJDdXN0b21TcWxRdWVyeSIgTmFtZT0iUXVlcnlCYXNlIj48U3FsPnNlbGVjdCAqIGZyb20gdndBcnRpZ29zPC9TcWw+PC9RdWVyeT48UmVzdWx0U2NoZW1hPjxEYXRhU2V0PjxWaWV3IE5hbWU9IlF1ZXJ5QmFzZSI+PEZpZWxkIE5hbWU9InRpcG9kb2MiIFR5cGU9IlN0cmluZyIgLz48RmllbGQgTmFtZT0iSUREb2N1bWVudG8iIFR5cGU9IkludDY0IiAvPjxGaWVsZCBOYW1lPSJRdWFudGlkYWRlIiBUeXBlPSJEb3VibGUiIC8+PEZpZWxkIE5hbWU9IlZhbG9yQ29tSXZhIiBUeXBlPSJEb3VibGUiIC8+PEZpZWxkIE5hbWU9IkNvZGlnbyIgVHlwZT0iU3RyaW5nIiAvPjxGaWVsZCBOYW1lPSJDb2RpZ29CYXJyYXMiIFR5cGU9IlN0cmluZyIgLz48RmllbGQgTmFtZT0iQ29kaWdvQmFycmFzRm9ybmVjZWRvciIgVHlwZT0iU3RyaW5nIiAvPjxGaWVsZCBOYW1lPSJSZWZlcmVuY2lhRm9ybmVjZWRvciIgVHlwZT0iU3RyaW5nIiAvPjxGaWVsZCBOYW1lPSJWYWxvckNvbUl2YTIiIFR5cGU9IkRvdWJsZSIgLz48RmllbGQgTmFtZT0iRGVzY3JpY2FvTWFyY2EiIFR5cGU9IlN0cmluZyIgLz48L1ZpZXc+PC9EYXRhU2V0PjwvUmVzdWx0U2NoZW1hPjxDb25uZWN0aW9uT3B0aW9ucyBDbG9zZUNvbm5lY3Rpb249InRydWUiIC8+PC9TcWxEYXRhU291cmNlPg==" /></ObjectStorage></XtraReportsLayoutSerializer>
''
, NULL, NULL, NULL, @IDLoja, N''select * from vwArtigos'', NULL, 0, 0, 1, 1, CAST(N''2017-01-31 00:00:00.000'' AS DateTime), N''F3M'', CAST(N''2017-01-17 16:58:42.120'' AS DateTime), N'''')
SET IDENTITY_INSERT [dbo].[tbMapasVistas] OFF
END')

EXEC('update tbmapasvistas set pordefeito=1 where id in (49,50,52,53)')
EXEC('update tbMapasVistas set IDModulo = 4, IDSistemaTipoDoc = 17 where entidade = ''DocumentosVendasServicos''')
EXEC('update tbMapasVistas set PorDefeito = 1 where Entidade = ''Relatorio''')
EXEC('update tbMapasVistas set PorDefeito = 0 where Entidade = ''Receita''')
EXEC('update tbMapasVistas set PorDefeito = 1 where NomeMapa = ''rptReceita1''')
EXEC('update tbmapasvistas set IDSistemaTipoDoc=21 where entidade=''DocumentosStockContagem''')
EXEC('update tbmapasvistas set IDSistemaTipoDoc=20 where entidade=''DocumentosPagamentosCompras''')
EXEC('update tbmapasvistas set IDSistemaTipoDoc=15 where entidade=''Recibos''')

EXEC('IF NOT EXISTS(SELECT * FROM [dbo].[tbTiposDocumento] WHERE Codigo=''VD'' )
BEGIN
INSERT [dbo].[tbTiposDocumento] ([Codigo], [Descricao], [IDModulo], [IDSistemaTiposDocumento], [Sistema], [Ativo], [DataCriacao], [UtilizadorCriacao], [DataAlteracao], [UtilizadorAlteracao], [Observacoes], [IDSistemaTiposDocumentoFiscal], [GereStock], [GereContaCorrente], [GereCaixasBancos], [RegistarCosumidorFinal], [AnalisesEstatisticas], [CalculaComissoes], [ControlaPlafondEntidade], [AcompanhaBensCirculacao], [DocNaoValorizado], [IDSistemaAcoes], [IDSistemaTiposLiquidacao], [CalculaNecessidades], 
[CustoMedio], [UltimoPrecoCusto], [DataPrimeiraEntrada], [DataUltimaEntrada], [DataPrimeiraSaida], [DataUltimaSaida], [IDSistemaAcoesRupturaStock], [IDSistemaTiposDocumentoMovStock], [IDSistemaTiposDocumentoPrecoUnitario], [AtualizaFichaTecnica], [IDEstado], [IDCliente], 
[IDSistemaAcoesStockMinimo], [IDSistemaAcoesStockMaximo], [IDSistemaAcoesReposicaoStock], [IDSistemaNaturezas], [ReservaStock], [GeraPendente], [Adiantamento], [Predefinido]) 
VALUES (N''VD'', N''Venda a Dinheiro'', 4, 14, 1, 1, CAST(N''2017-07-27 17:24:04.000'' AS DateTime), N''F3M'', NULL, NULL, NULL, 16, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, 1, 1, 1, 6, 0, 0, 1, 0)

DECLARE @IDLista as bigint
SELECT @IDLista=ID FROM [dbo].[tbTiposDocumento] WHERE Descricao=''Venda a Dinheiro''
INSERT [dbo].[tbTiposDocumentoTipEntPermDoc] ([IDTiposDocumento], [IDSistemaTiposEntidadeModulos], [Sistema], [Ativo], [DataCriacao], [UtilizadorCriacao], [DataAlteracao], [UtilizadorAlteracao], [Ordem], [ContadorDoc]) VALUES (@IDLista, 5, 0, 0, CAST(N''2017-05-30 09:17:28.420'' AS DateTime), N''F3M'', CAST(N''2017-05-30 09:17:28.420'' AS DateTime), N''F3M'', 0, 0)
INSERT [dbo].[tbTiposDocumentoTipEntPermDoc] ([IDTiposDocumento], [IDSistemaTiposEntidadeModulos], [Sistema], [Ativo], [DataCriacao], [UtilizadorCriacao], [DataAlteracao], [UtilizadorAlteracao], [Ordem], [ContadorDoc]) VALUES (@IDLista, 6, 0, 0, CAST(N''2017-05-30 09:17:28.427'' AS DateTime), N''F3M'', CAST(N''2017-05-30 09:17:28.427'' AS DateTime), N''F3M'', 0, 0)
INSERT [dbo].[tbTiposDocumentoSeries] ([CodigoSerie], [DescricaoSerie], [SugeridaPorDefeito], [IDTiposDocumento], [Sistema], [AtivoSerie], [DataCriacao], [UtilizadorCriacao], [DataAlteracao], [UtilizadorAlteracao], [Ordem], [CalculaComissoesSerie], [AnalisesEstatisticasSerie], [IVAIncluido], [IVARegimeCaixa], [DataInicial], [DataFinal], [DataUltimoDoc], [NumUltimoDoc], [IDSistemaTiposDocumentoOrigem], [IDSistemaTiposDocumentoComunicacao], [IDParametrosEmpresaCAE], [NumeroVias], [IDMapasVistas]) 
VALUES (''A'', ''A'', 1, @IDLista, 0, 1, CAST(N''2017-07-27 17:24:03.447'' AS DateTime), N''F3M'', NULL, NULL, 0, 0, 0, 1, 0, NULL, NULL, NULL, NULL, 1, 2, NULL, 2, 1)
INSERT [F3MOGeral].[dbo].[tbPerfisAcessosAreasEmpresa] ([IDPerfis], [IDMenusAreasEmpresa], [IDLinhaTabela], [Consultar], [Adicionar], [Alterar], [Remover], [Imprimir], [Exportar], [F4], [Ativo], [Sistema], [DataCriacao], [UtilizadorCriacao], [DataAlteracao], [UtilizadorAlteracao], [Importar], [Duplicar]) VALUES (1, 7, @IDLista, 1, 1, 1, 1, 0, 0, NULL, 0, 0, CAST(N''2017-05-30 12:26:30.000'' AS DateTime), N''F3M'', NULL, NULL, NULL, NULL)
END')

--aviso de nova versão
EXEC('
BEGIN
DELETE [F3MOGeral].dbo.tbNotificacoes Where versao=''1.19.0''
insert into [F3MOGeral].dbo.tbNotificacoes (Produto, Versao, Tipo, DataInicio, DataFim, Titulo, Texto, Link, Ordem, Visto, IdLoja, Ativo, Sistema, DataCriacao, UtilizadorCriacao) 
values (''Prisma'', ''1.19.0'', ''A'', ''2019-07-17 00:00'', ''2019-07-22 08:00'', ''Próxima atualização:'', ''O serviço poderá estar inativo durante breves minutos. Agradecemos a sua compreensão.'', ''MaisValias.pdf'', 2, 0, 1, 1, 0, getdate(), ''F3M'' ) 
insert into [F3MOGeral].dbo.tbNotificacoes (Produto, Versao, Tipo, DataInicio, DataFim, Titulo, Texto, Link, Ordem, Visto, IdLoja, Ativo, Sistema, DataCriacao, UtilizadorCriacao) 
values (''Prisma'', ''1.19.0'', ''V'', ''2019-07-22 08:00'', ''2019-07-22 08:00'', ''Funcionalidades da versão'', ''
<li>Etiquetas:</li>      Designer de Vistas de Impressão
</br>      Reorganização dos Modelos disponíveis</br>      Novo Modelo – A4 2 colunas</br>
<li>Documentos – arquitetura de Vistas:</li>      Escolha da Vista a imprimir</br>      Definição da Vista por defeito</br>
'', ''MaisValias.pdf'', 2, 0, 1, 1, 0, getdate(), ''F3M'' ) 
END')